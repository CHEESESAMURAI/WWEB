#!/bin/bash

echo "üõë –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Wild Analytics..."

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ npm –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ npm –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pkill -f "npm start" || echo "npm start –Ω–µ –Ω–∞–π–¥–µ–Ω"
pkill -f "npm run" || echo "npm run –Ω–µ –Ω–∞–π–¥–µ–Ω"
pkill -f "react-scripts" || echo "react-scripts –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pkill -f "python main.py" || echo "python main.py –Ω–µ –Ω–∞–π–¥–µ–Ω"
pkill -f "uvicorn" || echo "uvicorn –Ω–µ –Ω–∞–π–¥–µ–Ω"
pkill -f "fastapi" || echo "fastapi –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pkill -f "node" || echo "node –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –ø–æ—Ä—Ç–∞–º
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö..."
lsof -ti:3000 | xargs kill -9 2>/dev/null || echo "–ü–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω"
lsof -ti:8000 | xargs kill -9 2>/dev/null || echo "–ü–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω"
lsof -ti:80 | xargs kill -9 2>/dev/null || echo "–ü–æ—Ä—Ç 80 —Å–≤–æ–±–æ–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker stop $(docker ps -q) 2>/dev/null || echo "Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
docker-compose down 2>/dev/null || echo "docker-compose –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Wild Analytics
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Wild Analytics..."
pkill -f "wild-analytics" || echo "wild-analytics –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
pkill -f "WWEB" || echo "WWEB –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤..."
echo "–ü–æ—Ä—Ç 3000:"
lsof -i:3000 || echo "–°–≤–æ–±–æ–¥–µ–Ω"
echo "–ü–æ—Ä—Ç 8000:"
lsof -i:8000 || echo "–°–≤–æ–±–æ–¥–µ–Ω"

echo "‚úÖ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"
echo ""
echo "üöÄ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ:"
echo "./fix_and_start_complete.sh" 