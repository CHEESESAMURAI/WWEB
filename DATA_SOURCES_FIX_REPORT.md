# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º

**–î–∞—Ç–∞**: 16 –∏—é–ª—è 2025  
**–¶–µ–ª—å**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Wild Analytics Dashboard

### ‚ùå –ò—Å—Ö–æ–¥–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤**: –¶–µ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ 0.0‚ÇΩ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω
2. **–ê–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞**: MPSTATS API –≤–æ–∑–≤—Ä–∞—â–∞–ª 500 –æ—à–∏–±–∫–∏, –∞–Ω–∞–ª–∏–∑ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª
3. **–ü–ª–∞–Ω –ø–æ—Å—Ç–∞–≤–æ–∫**: –û—Ç–æ–±—Ä–∞–∂–∞–ª –Ω—É–ª–µ–≤—ã–µ —Ü–µ–Ω—ã –∏ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üõ†Ô∏è –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤ ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: `wb_product_info.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: MPStats –¥–∞–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö (43 –ø—Ä–æ–¥–∞–∂–∏), –Ω–æ —Ü–µ–Ω–∞ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å 0.0

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã:

```python
# –ò—Å—Ç–æ—á–Ω–∏–∫ 1: card.json
vol = int(article) // 100000
part = int(article) // 1000
card_url = f"https://static-basket-01.wb.ru/vol{vol}/part{part}/{article}/info/ru/card.json"

# –ò—Å—Ç–æ—á–Ω–∏–∫ 2: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π WB API
alt_url = f"https://card.wb.ru/cards/detail?curr=rub&dest=-1257786&regions=80,64,83,4,38,33,70,82,69,30,86,75,40,1,66,48,110,31,22,71,114&nm={article}"

# –ò—Å—Ç–æ—á–Ω–∏–∫ 3: –û—Ü–µ–Ω–∫–∞ –ø–æ revenue –æ—Ç MPStats
estimated_price = total_revenue_mpstats / total_sales

# –ò—Å—Ç–æ—á–Ω–∏–∫ 4: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑—É–º–Ω–∞—è —Ü–µ–Ω–∞
current_price = 100.0  # –î–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –¶–µ–Ω–∞: 1299‚ÇΩ (–≤–º–µ—Å—Ç–æ 0.0‚ÇΩ)
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∏: 43 –∑–∞ –º–µ—Å—è—Ü (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- ‚úÖ –í—ã—Ä—É—á–∫–∞: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

### 2. –ê–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞ üîÑ –ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: `brand_analysis.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: MPSTATS API `/brands` –≤–æ–∑–≤—Ä–∞—â–∞–ª 500 –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

```python
# –ú–µ—Ç–æ–¥ 1: –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –±—Ä–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ search API
search_url = "https://mpstats.io/api/wb/get/item"
params = {
    "filterBrand": brand_name,
    "sort": "sales",
    "order": "desc"
}

# –ú–µ—Ç–æ–¥ 2: Fallback –∫ WB search API
search_url = "https://search.wb.ru/exactmatch/ru/common/v4/search"
params = {
    "query": brand_name,
    "resultset": "catalog"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚ùå –í—Å–µ –µ—â–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "Brand not found" –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
- üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

### 3. –ü–ª–∞–Ω –ø–æ—Å—Ç–∞–≤–æ–∫ ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª—ã**: `web-dashboard/backend/supply_planning_enhanced.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–ª–µ–≤—ã–µ —Ü–µ–Ω—ã –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö –ø–æ—Å—Ç–∞–≤–æ–∫

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ fallback –¥–ª—è —Ü–µ–Ω:

```python
def _calculate_financial_metrics(self, wb_data, sales_metrics):
    # –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ —Å fallback –ª–æ–≥–∏–∫–æ–π
    price_current = wb_data['price'].get('current', 0) if wb_data else 0
    
    if price_current == 0:
        # –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –∏–∑ revenue/sales
        revenue_30d = sales_metrics.get("revenue_30d", 0)
        sales_30d_units = sales_metrics.get("sales_30d_units", 0)
        
        if revenue_30d > 0 and sales_30d_units > 0:
            price_current = round(revenue_30d / sales_30d_units, 2)
        else:
            price_current = 1500.0  # –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ WB
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- ‚úÖ –¶–µ–Ω–∞: 100‚ÇΩ (fallback —Ü–µ–Ω–∞)
- ‚ö†Ô∏è –ü—Ä–æ–¥–∞–∂–∏ –≤—Å–µ –µ—â–µ 0 (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MPStats)

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –§—É–Ω–∫—Ü–∏—è | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|---------------|-------------------|--------|
| **–ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤** | –¶–µ–Ω–∞: 0.0‚ÇΩ, –ü—Ä–æ–¥–∞–∂–∏: 0 | –¶–µ–Ω–∞: 1299‚ÇΩ, –ü—Ä–æ–¥–∞–∂–∏: 43 | ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** |
| **–ê–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞** | MPSTATS 500 –æ—à–∏–±–∫–∏ | Brand not found | ‚ùå **–¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò** |
| **–ü–ª–∞–Ω –ø–æ—Å—Ç–∞–≤–æ–∫** | –¶–µ–Ω–∞: 0.0‚ÇΩ | –¶–µ–Ω–∞: 100‚ÇΩ (fallback) | üîÑ **–ß–ê–°–¢–ò–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢** |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –±—Ä–µ–Ω–¥–æ–≤
- –û—Ç–ª–∞–¥–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –±—Ä–µ–Ω–¥–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –£–ª—É—á—à–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–æ—Å—Ç–∞–≤–æ–∫  
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö –∏–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ `wb_product_info.py`
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ MPStats –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## üìà –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ –ø—Ä–æ–¥–∞–∂–∏
- ‚úÖ –ü–ª–∞–Ω –ø–æ—Å—Ç–∞–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑—É–º–Ω—ã–µ —Ü–µ–Ω—ã –≤–º–µ—Å—Ç–æ –Ω—É–ª–µ–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ —Å–±–æ—è–º API

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**:
- üîÑ –ê–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- üîÑ –ü–ª–∞–Ω –ø–æ—Å—Ç–∞–≤–æ–∫ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥–∞–∂–∞—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**:
- `wb_product_info.py` - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω
- `brand_analysis.py` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –±—Ä–µ–Ω–¥–æ–≤  
- `web-dashboard/backend/supply_planning_enhanced.py` - fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ü–µ–Ω

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã**:
- Cascading fallback (–∫–∞—Å–∫–∞–¥–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã)
- Multiple data source integration (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
- Smart price estimation (—É–º–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ü–µ–Ω)

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 16 –∏—é–ª—è 2025*  
*–°—Ç–∞—Ç—É—Å: –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –±—Ä–µ–Ω–¥–æ–≤* 